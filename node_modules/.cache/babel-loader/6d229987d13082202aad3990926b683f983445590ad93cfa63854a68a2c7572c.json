{"ast":null,"code":"// Utilities: loadQuestions, getRandomQuestion, progress save/load\nimport questionsData from './data/questions.json';\nconst STORAGE_KEY = 'qaProgress';\nexport function loadQuestions() {\n  return questionsData;\n}\nexport function loadProgress() {\n  try {\n    const raw = localStorage.getItem(STORAGE_KEY);\n    if (!raw) return {\n      completedQuestions: [],\n      savedQuestions: []\n    };\n    return JSON.parse(raw);\n  } catch (e) {\n    console.error('Failed to load progress', e);\n    return {\n      completedQuestions: [],\n      savedQuestions: []\n    };\n  }\n}\nexport function saveProgress(progress) {\n  try {\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(progress));\n  } catch (e) {\n    console.error('Failed to save progress', e);\n  }\n}\nexport function resetProgress() {\n  try {\n    localStorage.removeItem(STORAGE_KEY);\n  } catch (e) {\n    console.error('Failed to reset progress', e);\n  }\n}\nexport function getRandomQuestion(questions, completedIds = []) {\n  if (!Array.isArray(questions) || questions.length === 0) return null;\n  const remaining = questions.filter(q => !completedIds.includes(q.id));\n  if (remaining.length === 0) return null;\n  const idx = Math.floor(Math.random() * remaining.length);\n  return remaining[idx];\n}\n\n// Return flat array of questions with cluster and topic metadata\nexport function flattenQuestions(data) {\n  const out = [];\n  (data.clusters || []).forEach(cluster => {\n    (cluster.topics || []).forEach(topic => {\n      (topic.questions || []).forEach(q => {\n        out.push({\n          ...q,\n          cluster: cluster.name,\n          topic: topic.name\n        });\n      });\n    });\n  });\n  return out;\n}\nexport function findQuestionById(data, id) {\n  const flat = flattenQuestions(data);\n  return flat.find(q => q.id === id) || null;\n}\nexport function getProgressSummary(data, progress) {\n  const completed = new Set(progress.completedQuestions || []);\n  return (data.clusters || []).map(cluster => ({\n    name: cluster.name,\n    topics: (cluster.topics || []).map(topic => {\n      const total = (topic.questions || []).length;\n      const completedCount = (topic.questions || []).filter(q => completed.has(q.id)).length;\n      return {\n        name: topic.name,\n        total,\n        completed: completedCount\n      };\n    })\n  }));\n}","map":{"version":3,"names":["questionsData","STORAGE_KEY","loadQuestions","loadProgress","raw","localStorage","getItem","completedQuestions","savedQuestions","JSON","parse","e","console","error","saveProgress","progress","setItem","stringify","resetProgress","removeItem","getRandomQuestion","questions","completedIds","Array","isArray","length","remaining","filter","q","includes","id","idx","Math","floor","random","flattenQuestions","data","out","clusters","forEach","cluster","topics","topic","push","name","findQuestionById","flat","find","getProgressSummary","completed","Set","map","total","completedCount","has"],"sources":["C:/Users/homel/Downloads/alb math program/src/utils.js"],"sourcesContent":["// Utilities: loadQuestions, getRandomQuestion, progress save/load\r\nimport questionsData from './data/questions.json';\r\n\r\nconst STORAGE_KEY = 'qaProgress';\r\n\r\nexport function loadQuestions() {\r\n  return questionsData;\r\n}\r\n\r\nexport function loadProgress() {\r\n  try {\r\n    const raw = localStorage.getItem(STORAGE_KEY);\r\n    if (!raw) return { completedQuestions: [], savedQuestions: [] };\r\n    return JSON.parse(raw);\r\n  } catch (e) {\r\n    console.error('Failed to load progress', e);\r\n    return { completedQuestions: [], savedQuestions: [] };\r\n  }\r\n}\r\n\r\nexport function saveProgress(progress) {\r\n  try {\r\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(progress));\r\n  } catch (e) {\r\n    console.error('Failed to save progress', e);\r\n  }\r\n}\r\n\r\nexport function resetProgress() {\r\n  try {\r\n    localStorage.removeItem(STORAGE_KEY);\r\n  } catch (e) {\r\n    console.error('Failed to reset progress', e);\r\n  }\r\n}\r\n\r\nexport function getRandomQuestion(questions, completedIds = []) {\r\n  if (!Array.isArray(questions) || questions.length === 0) return null;\r\n  const remaining = questions.filter(q => !completedIds.includes(q.id));\r\n  if (remaining.length === 0) return null;\r\n  const idx = Math.floor(Math.random() * remaining.length);\r\n  return remaining[idx];\r\n}\r\n\r\n// Return flat array of questions with cluster and topic metadata\r\nexport function flattenQuestions(data) {\r\n  const out = [];\r\n  (data.clusters || []).forEach(cluster => {\r\n    (cluster.topics || []).forEach(topic => {\r\n      (topic.questions || []).forEach(q => {\r\n        out.push({ ...q, cluster: cluster.name, topic: topic.name });\r\n      });\r\n    });\r\n  });\r\n  return out;\r\n}\r\n\r\nexport function findQuestionById(data, id) {\r\n  const flat = flattenQuestions(data);\r\n  return flat.find(q => q.id === id) || null;\r\n}\r\n\r\nexport function getProgressSummary(data, progress) {\r\n  const completed = new Set(progress.completedQuestions || []);\r\n  return (data.clusters || []).map(cluster => ({\r\n    name: cluster.name,\r\n    topics: (cluster.topics || []).map(topic => {\r\n      const total = (topic.questions || []).length;\r\n      const completedCount = (topic.questions || []).filter(q => completed.has(q.id)).length;\r\n      return { name: topic.name, total, completed: completedCount };\r\n    })\r\n  }));\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}